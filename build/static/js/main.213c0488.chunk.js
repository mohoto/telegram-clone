(this["webpackJsonptelegram-clone"]=this["webpackJsonptelegram-clone"]||[]).push([[0],{100:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){"use strict";a.r(t);var c=a(5),n=a(1),s=a.n(n),i=a(13),r=a.n(i),o=(a(97),a(98),a(16)),l=(a(99),a(68)),d=a.n(l),j=a(69),u=a.n(j),b=a(158),h=(a(100),a(162)),m=a(17),O=a(35),p=Object(O.b)({name:"thread",initialState:{thread:null},reducers:{setThread:function(e,t){e.thread=t.payload.threadId}}}),x=p.actions.setThread,f=function(e){return e.thread.thread},g=p.reducer,v=function(e){var t=e.name,a=e.id,s=(e.photo,Object(n.useState)("")),i=Object(o.a)(s,2),r=i[0],l=i[1];Object(n.useEffect)((function(){l(Math.floor(5e3*Math.random()))}),[]);var d=Object(m.c)(f),j=Object(m.b)();return Object(c.jsxs)("div",{className:"sidebarThread ".concat(d==a?"active":""),onClick:function(){j(x({threadName:t,threadId:a}))},children:[Object(c.jsx)(h.a,{src:"https://avatars.dicebear.com/api/avataaars/".concat(r,".svg")}),Object(c.jsxs)("div",{className:"sidebarThread__details",children:[Object(c.jsx)("h3",{children:t}),Object(c.jsx)("p",{children:"This is the info"}),Object(c.jsx)("small",{className:"sidebarThread__timestamp",children:"Timestamp"})]})]},a)},_=a(70),N=a.n(_),y=a(71),C=a.n(y),S=a(72),T=a.n(S),k=Object(O.b)({name:"login",initialState:{user:null},reducers:{loginUser:function(e,t){e.user=t.payload},logout:function(e){e.user=null}}}),I=k.actions,w=I.loginUser,D=I.logout,A=function(e){return e.login.user},F=k.reducer,L=a(40),M=L.a.initializeApp({apiKey:"AIzaSyCwSCZi0QVI7hOuN1czWK2WpSmg7xa7JXc",authDomain:"telegram-clone-64646.firebaseapp.com",databaseURL:"https://telegram-clone-64646.firebaseio.com",projectId:"telegram-clone-64646",storageBucket:"telegram-clone-64646.appspot.com",messagingSenderId:"545137159103",appId:"1:545137159103:web:1619c6abb14eb2aca5cf0a"}),P=L.a.auth(),E=new L.a.auth.GoogleAuthProvider,B=M.firestore(),U=a(157),R=a(159),W=a(161),z=a(156),J=a(154),K=a(155),V=a(153);function G(e){var t=e.openModalThread,a=e.handleClose,s=Object(n.useState)(),i=Object(o.a)(s,2),r=i[0],l=i[1];return Object(c.jsx)("div",{children:Object(c.jsxs)(W.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",children:[Object(c.jsx)(V.a,{id:"form-dialog-title",children:"Ajouter"}),Object(c.jsxs)(J.a,{children:[Object(c.jsx)(K.a,{children:"Ajouter un utilisateur"}),Object(c.jsx)(R.a,{autoFocus:!0,margin:"dense",id:"name",label:"utilisateur",type:"text",fullWidth:!0,value:r,onChange:function(e){return l(e.target.value)}})]}),Object(c.jsxs)(z.a,{children:[Object(c.jsx)(U.a,{onClick:a,color:"primary",children:"Annuler"}),Object(c.jsx)(U.a,{onClick:function(){B.collection("threads").add({name:r}),a()},color:"primary",children:"Ajouter"})]})]})})}function H(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],s=t[1],i=Object(m.c)(A),r=Object(n.useState)(),l=Object(o.a)(r,2),j=l[0],O=l[1];return Object(n.useEffect)((function(){B.collection("threads").onSnapshot((function(e){return O(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"sidebar__header",children:[Object(c.jsxs)("div",{className:"sidebar__search",children:[Object(c.jsx)(d.a,{}),Object(c.jsx)("input",{type:"text",placeholder:"Recherche",className:"sidebar__searchInput"})]}),Object(c.jsx)(b.a,{variant:"outlined",className:"sidebar__button",onClick:function(){s(!0)},children:Object(c.jsx)(u.a,{})})]}),Object(c.jsx)("div",{className:"sidebar__threads",children:null===j||void 0===j?void 0:j.map((function(e){return Object(c.jsx)(v,{name:e.data.name,id:e.id,photo:e.data.photo})}))}),Object(c.jsxs)("div",{className:"sidebar__bottom",children:[Object(c.jsx)(h.a,{className:"sidebar__bottom__avatar",alt:i.displayName,src:i.photo}),Object(c.jsx)(b.a,{children:Object(c.jsx)(N.a,{})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(C.a,{})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(T.a,{})})]}),Object(c.jsx)(G,{openModalThread:a,handleClose:function(){s(!1)}})]})}a(111);var Q=a(74),X=a.n(Q),Y=a(77),Z=a.n(Y),q=a(76),$=a.n(q),ee=a(78),te=a.n(ee),ae=a(75),ce=a.n(ae),ne=a(79),se=a(163),ie=(a(112),a(73)),re=a.n(ie);function oe(e){var t=e.id,a=e.data,n=a.message,s=(a.uid,a.photo),i=a.email,r=a.timestamp,o=Object(m.c)(A);return Object(c.jsxs)("div",{className:"message ".concat(o.email===i&&"message__sender"),children:[Object(c.jsx)(h.a,{src:s,className:"message__photo"}),Object(c.jsxs)("div",{className:"message__contents",children:[Object(c.jsx)("p",{children:n}),Object(c.jsx)("p",{children:new Date(null===r||void 0===r?void 0:r.toDate()).toLocaleTimeString()}),Object(c.jsx)("small",{children:re.a.locale()})]})]},t)}console.log("jour",function(){var e=new Date,t=e.getDate();e.getMonth(),e.getFullYear();return t}());var le=["Deconnexion","Profile"];function de(){var e=Object(m.c)(A),t=Object(m.c)(f),a=Object(m.b)(),s=function(){a(D())},i=Object(n.useState)(),r=Object(o.a)(i,2),l=r[0],d=r[1];Object(n.useEffect)((function(){t&&B.collection("threads").doc(t).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return d(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[t]),console.log(l);var j=Object(n.useState)(""),u=Object(o.a)(j,2),O=u[0],p=u[1],x=Object(n.useState)(null),g=Object(o.a)(x,2),v=g[0],_=g[1],N=Boolean(v),y=function(){_(null)};return Object(c.jsxs)("div",{className:"thread",children:[Object(c.jsxs)("div",{className:"thread__header",children:[Object(c.jsxs)("div",{className:"thread__header__contents",children:[Object(c.jsx)(h.a,{alt:e.displayName,src:e.photo}),Object(c.jsxs)("div",{className:"thread__header__contents__info",children:[Object(c.jsx)("h4",{children:e.displayName}),Object(c.jsx)("h5",{children:"Last seen"})]})]}),Object(c.jsx)(b.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){_(e.currentTarget)},children:Object(c.jsx)(X.a,{className:"thread__header__details"})}),Object(c.jsx)(ne.a,{id:"long-menu",anchorEl:v,keepMounted:!0,open:N,onClose:y,PaperProps:{style:{maxHeight:216,width:"20ch"}},children:le.map((function(e){return Object(c.jsx)(se.a,{selected:"Deconnexion"===e,onClick:"Deconnexion"===e?s:y,children:e},e)}))})]}),Object(c.jsx)("div",{className:"thread__messages",children:null===l||void 0===l?void 0:l.map((function(e){return Object(c.jsx)(oe,{id:e.id,data:e.data})}))}),Object(c.jsx)("div",{className:"thread__input",children:Object(c.jsxs)("form",{children:[Object(c.jsx)(b.a,{children:Object(c.jsx)(ce.a,{})}),Object(c.jsx)("input",{placeholder:"message",value:O,onChange:function(e){return p(e.target.value)}}),Object(c.jsx)(b.a,{children:Object(c.jsx)($.a,{})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(Z.a,{type:"submit",className:"thread__messages__button",onClick:function(a){a.preventDefault(),t?(B.collection("threads").doc(t).collection("messages").add({timestamp:L.a.firestore.FieldValue.serverTimestamp(),message:O,uid:e.uid,photo:e.photo,email:e.email,name:e.displayName}),p("")):p("")}})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(te.a,{})})]})})]})}function je(){return Object(c.jsxs)("div",{className:"telegram",children:[Object(c.jsx)(H,{}),Object(c.jsx)(de,{})]})}a(114);function ue(){Object(m.b)();return Object(c.jsx)("div",{className:"login",children:Object(c.jsxs)("div",{className:"login__container",children:[Object(c.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg",alt:"logo google"}),Object(c.jsx)(U.a,{variant:"contained",onClick:function(){P.signInWithPopup(E).then((function(e){return B.collection("threads").add({uid:e.user.uid,photo:e.user.photoURL,email:e.user.email,name:e.user.displayName})})).catch((function(e){return console.log(e.message)}))},children:"Se connecter avec google"})]})})}var be=function(){var e=Object(m.c)(A),t=Object(m.b)();return Object(n.useEffect)((function(){P.onAuthStateChanged((function(e){t(e?w({uid:e.uid,photo:e.photoURL,email:e.email,displayName:e.displayName}):D)}))}),[t]),Object(c.jsx)("div",{className:"App",children:e?Object(c.jsx)(je,{}):Object(c.jsx)(ue,{})})},he=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,165)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))},me=Object(O.a)({reducer:{login:F,thread:g}});r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(m.a,{store:me,children:Object(c.jsx)(be,{})})}),document.getElementById("root")),he()},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.213c0488.chunk.js.map